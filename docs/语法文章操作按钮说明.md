# 语法文章操作按钮说明

## ✨ 新功能

在语法文章页面的每个文章卡片底部，现在添加了三个操作按钮：

### 📋 功能按钮

1. **👁️ 查看** - 以阅读模式打开文章
2. **✏️ 编辑** - 编辑文章内容
3. **🗑️ 删除** - 删除文章（需确认）

---

## 🎨 按钮样式

### 视觉设计

每个按钮都有独特的渐变色和交互效果：

#### 查看按钮（蓝紫渐变）
- 背景：紫蓝渐变 (#667eea → #764ba2)
- 悬停效果：上浮2px + 紫色阴影
- 图标：👁️

#### 编辑按钮（粉红渐变）
- 背景：粉红渐变 (#f093fb → #f5576c)
- 悬停效果：上浮2px + 粉色阴影
- 图标：✏️

#### 删除按钮（橙黄渐变）
- 背景：橙黄渐变 (#fa709a → #fee140)
- 悬停效果：上浮2px + 橙色阴影
- 图标：🗑️

### 布局特点

```
┌─────────────────────────────────┐
│  文章卡片                        │
│  ────────────────────────────   │
│  标题、内容预览、元信息           │
│  ────────────────────────────   │
│  [👁️ 查看] [✏️ 编辑] [🗑️ 删除]  │
└─────────────────────────────────┘
```

- 按钮区域背景：浅灰色 (#f8f9fa)
- 按钮间距：8px
- 按钮宽度：自适应平分
- 边框：顶部细线分隔

---

## 📱 响应式设计

### 桌面端（> 768px）
- 三个按钮横向排列
- 每个按钮等宽
- 显示完整图标和文字

### 移动端（≤ 768px）
- 按钮自动换行
- 每行显示2个按钮
- 最小宽度：100px
- 字体和内边距自动缩小

---

## 🔧 功能详解

### 1. 查看按钮

**功能**：以阅读模式打开文章

**行为**：
- 点击后跳转到 `grammar.html?id={文章ID}`
- 在英语语法页面中显示文章内容
- 支持词汇标注、句子标注、朗读等功能

**实现**：
```javascript
function openReadingMode(id) {
    window.location.href = `grammar.html?id=${id}`;
}
```

### 2. 编辑按钮

**功能**：编辑文章内容

**行为**：
1. 从后端获取文章详情
2. 打开文章编辑模态框
3. 填充当前文章数据
4. 允许修改标题、内容、难度等
5. 保存后更新文章列表

**实现**：
```javascript
async function editArticle(id) {
    // 根据当前tab选择正确的API端点
    let apiEndpoint = '';
    if (currentTab === 'grammar') {
        apiEndpoint = 'grammar-articles';
    } else if (currentTab === 'mine') {
        apiEndpoint = 'user-grammar-articles';
    }
    
    // 获取文章详情并显示在模态框中
    const response = await fetch(`${API_BASE_URL}/${apiEndpoint}/${id}/`);
    const article = await response.json();
    
    // 填充表单...
}
```

### 3. 删除按钮

**功能**：删除文章

**行为**：
1. 点击后弹出确认对话框
2. 用户确认后才执行删除
3. 删除成功后刷新文章列表
4. 显示删除成功提示

**实现**：
```javascript
function confirmDeleteArticle(id) {
    deleteArticleId = id;
    deleteModal.style.display = 'flex';
}

async function handleDeleteConfirm() {
    // 根据当前tab选择正确的API端点
    let apiEndpoint = '';
    if (currentTab === 'grammar') {
        apiEndpoint = 'grammar-articles';
    } else if (currentTab === 'mine') {
        apiEndpoint = 'user-grammar-articles';
    }
    
    // 执行删除...
    const response = await fetch(
        `${API_BASE_URL}/${apiEndpoint}/${deleteArticleId}/`, 
        { method: 'DELETE' }
    );
}
```

---

## 🎯 使用场景

### 语法 Tab

**适用**：系统语法文章

**权限**：
- 查看：所有用户 ✅
- 编辑：管理员 ⚠️
- 删除：管理员 ⚠️

**建议**：
- 普通用户主要使用"查看"功能
- 管理员可以编辑和删除系统文章
- 谨慎删除，可能影响其他用户

### 我的 Tab

**适用**：用户个人语法文章

**权限**：
- 查看：当前用户 ✅
- 编辑：当前用户 ✅
- 删除：当前用户 ✅

**建议**：
- 可以自由编辑自己的文章
- 删除前注意备份重要内容
- 利用AI生成功能快速创建内容

---

## 💡 交互提示

### 视觉反馈

**鼠标悬停**：
- 按钮上浮 2px
- 显示彩色阴影
- 光标变为手型 (cursor: pointer)
- 平滑过渡动画 (0.3s)

**点击反馈**：
- 立即响应操作
- 显示加载状态（如适用）
- 操作完成后刷新界面

**状态提示**：
- 删除前弹出确认对话框
- 操作成功显示提示消息
- 操作失败显示错误信息

### 多语言支持

当前按钮文字为中文：
- 👁️ 查看
- ✏️ 编辑
- 🗑️ 删除

如需英文版本，可修改为：
- 👁️ View
- ✏️ Edit
- 🗑️ Delete

---

## 🔍 调试技巧

### 检查按钮是否正常显示

**打开浏览器Console（F12）**：

```javascript
// 检查按钮数量
document.querySelectorAll('.btn-action').length;

// 检查每种按钮
document.querySelectorAll('.btn-view').length;
document.querySelectorAll('.btn-edit').length;
document.querySelectorAll('.btn-delete').length;
```

### 测试按钮功能

```javascript
// 手动触发编辑
editArticle(1);

// 手动触发删除确认
confirmDeleteArticle(1);

// 手动触发查看
openReadingMode(1);
```

### 检查样式

```javascript
// 检查按钮样式
const btn = document.querySelector('.btn-view');
console.log(window.getComputedStyle(btn));
```

---

## 📝 自定义扩展

### 添加新按钮

如需添加更多操作按钮，修改 `grammar_articles.js` 的 `displayArticles` 函数：

```javascript
<div class="article-actions">
    <button class="btn-action btn-view" onclick="openReadingMode(${article.id})">
        👁️ 查看
    </button>
    <button class="btn-action btn-edit" onclick="editArticle(${article.id})">
        ✏️ 编辑
    </button>
    <button class="btn-action btn-delete" onclick="confirmDeleteArticle(${article.id})">
        🗑️ 删除
    </button>
    <!-- 新按钮示例 -->
    <button class="btn-action btn-share" onclick="shareArticle(${article.id})">
        📤 分享
    </button>
</div>
```

### 修改按钮样式

在 `grammar_articles.css` 中添加新样式：

```css
.article-actions .btn-share {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    color: white;
}

.article-actions .btn-share:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(79, 172, 254, 0.4);
}
```

### 条件显示按钮

根据用户权限或文章状态显示不同按钮：

```javascript
// 示例：只在"我的"tab显示编辑和删除
const actionButtons = currentTab === 'mine' 
    ? `
    <button class="btn-action btn-view" onclick="openReadingMode(${article.id})">
        👁️ 查看
    </button>
    <button class="btn-action btn-edit" onclick="editArticle(${article.id})">
        ✏️ 编辑
    </button>
    <button class="btn-action btn-delete" onclick="confirmDeleteArticle(${article.id})">
        🗑️ 删除
    </button>
    `
    : `
    <button class="btn-action btn-view" onclick="openReadingMode(${article.id})">
        👁️ 查看
    </button>
    `;
```

---

## ✅ 验证清单

功能正常的标志：

- [ ] 所有文章卡片底部都显示操作按钮
- [ ] 按钮样式美观，渐变色正确
- [ ] 鼠标悬停有上浮和阴影效果
- [ ] "查看"按钮能正确跳转到阅读页面
- [ ] "编辑"按钮能打开编辑模态框并填充数据
- [ ] "删除"按钮会先弹出确认对话框
- [ ] 删除确认后文章消失并刷新列表
- [ ] 移动端按钮自动换行，显示正常

---

## 🎨 截图示例

### 桌面端效果

```
┌─────────────────────────────────────────────┐
│ ❤️ Present Perfect Tense            [中级]  │
│                                              │
│ This tense is used to describe actions...   │
│                                              │
│ 📖 2小时前 • 第3/10页 • 📅 2025/10/25       │
├─────────────────────────────────────────────┤
│  [👁️ 查看]  [✏️ 编辑]  [🗑️ 删除]           │
└─────────────────────────────────────────────┘
```

### 移动端效果

```
┌───────────────────────────┐
│ ❤️ Present Perfect  [中级]│
│                            │
│ This tense is used...     │
│                            │
│ 📖 2小时前                │
│ 📅 2025/10/25             │
├───────────────────────────┤
│  [👁️ 查看]  [✏️ 编辑]    │
│  [🗑️ 删除]                │
└───────────────────────────┘
```

---

**更新日期**：2025-10-25  
**版本**：v1.0

