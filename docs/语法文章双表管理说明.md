# è¯­æ³•æ–‡ç« åŒè¡¨ç®¡ç†è¯´æ˜

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

è¯­æ³•æ–‡ç« é¡µé¢ç°åœ¨ä½¿ç”¨ä¸¤ä¸ªç‹¬ç«‹çš„æ•°æ®åº“è¡¨æ¥åˆ†åˆ«ç®¡ç†"è¯­æ³•"å’Œ"æˆ‘çš„"ä¸¤ä¸ªtabä¸‹çš„æ–‡ç« ï¼š

- **è¯­æ³•æ–‡ç« è¡¨** (`grammar_articles`)ï¼šå­˜å‚¨ç³»ç»Ÿç®¡ç†çš„è¯­æ³•æ•™å­¦æ–‡ç« 
- **ç”¨æˆ·è¯­æ³•æ–‡ç« è¡¨** (`user_grammar_articles`)ï¼šå­˜å‚¨ç”¨æˆ·åˆ›å»ºçš„è¯­æ³•æ–‡ç« 

## ğŸ—‚ï¸ æ•°æ®åº“ç»“æ„

### 1. GrammarArticleï¼ˆè¯­æ³•æ–‡ç« è¡¨ï¼‰

**è¡¨å**ï¼š`grammar_articles`

**å­—æ®µ**ï¼š
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | Integer | ä¸»é”® |
| title | CharField(200) | æ–‡ç« æ ‡é¢˜ |
| content | TextField | æ–‡ç« å†…å®¹ |
| source | CharField(200) | æ¥æºï¼ˆå¯é€‰ï¼‰ |
| difficulty | CharField(20) | éš¾åº¦ï¼šbeginner/intermediate/advanced |
| category | CharField(50) | åˆ†ç±»ï¼ˆå¯é€‰ï¼‰ |
| word_count | Integer | å•è¯æ•°ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰ |
| paragraph_count | Integer | æ®µè½æ•°ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰ |
| paragraphs | JSONField | æ®µè½æ•°æ® |
| created_at | DateTime | åˆ›å»ºæ—¶é—´ |
| updated_at | DateTime | æ›´æ–°æ—¶é—´ |
| is_active | Boolean | æ˜¯å¦å¯ç”¨ |
| author | CharField(50) | ä½œè€…ï¼ˆé»˜è®¤'admin'ï¼‰ |

**ç‰¹ç‚¹**ï¼š
- ç³»ç»Ÿç®¡ç†å‘˜åˆ›å»ºå’Œç»´æŠ¤
- æ‰€æœ‰ç”¨æˆ·å¯è§
- é»˜è®¤ä½œè€…ä¸º'admin'

### 2. UserGrammarArticleï¼ˆç”¨æˆ·è¯­æ³•æ–‡ç« è¡¨ï¼‰

**è¡¨å**ï¼š`user_grammar_articles`

**å­—æ®µ**ï¼šä¸ `GrammarArticle` å®Œå…¨ç›¸åŒ

**ç‰¹ç‚¹**ï¼š
- ç”¨æˆ·è‡ªå·±åˆ›å»ºå’Œç®¡ç†
- åªæ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„æ–‡ç« ï¼ˆæŒ‰authorç­›é€‰ï¼‰
- ä½œè€…å­—æ®µè‡ªåŠ¨è®¾ç½®ä¸ºå½“å‰ç”¨æˆ·å

## ğŸ”Œ API ç«¯ç‚¹

### è¯­æ³•æ–‡ç«  API

**åŸºç¡€URL**ï¼š`/api/grammar-articles/`

**æ”¯æŒçš„æ“ä½œ**ï¼š
- `GET /api/grammar-articles/` - è·å–è¯­æ³•æ–‡ç« åˆ—è¡¨
- `GET /api/grammar-articles/{id}/` - è·å–å•ç¯‡è¯­æ³•æ–‡ç« 
- `POST /api/grammar-articles/` - åˆ›å»ºè¯­æ³•æ–‡ç« ï¼ˆç®¡ç†å‘˜ï¼‰
- `PUT /api/grammar-articles/{id}/` - æ›´æ–°è¯­æ³•æ–‡ç« ï¼ˆç®¡ç†å‘˜ï¼‰
- `DELETE /api/grammar-articles/{id}/` - åˆ é™¤è¯­æ³•æ–‡ç« ï¼ˆç®¡ç†å‘˜ï¼‰
- `POST /api/grammar-articles/generate_content/` - AIç”Ÿæˆå†…å®¹

**æŸ¥è¯¢å‚æ•°**ï¼š
- `page` - é¡µç 
- `page_size` - æ¯é¡µæ•°é‡
- `search` - æœç´¢å…³é”®è¯ï¼ˆæ ‡é¢˜/å†…å®¹/åˆ†ç±»ï¼‰
- `difficulty` - éš¾åº¦ç­›é€‰
- `category` - åˆ†ç±»ç­›é€‰

### ç”¨æˆ·è¯­æ³•æ–‡ç«  API

**åŸºç¡€URL**ï¼š`/api/user-grammar-articles/`

**æ”¯æŒçš„æ“ä½œ**ï¼š
- `GET /api/user-grammar-articles/` - è·å–å½“å‰ç”¨æˆ·çš„è¯­æ³•æ–‡ç« åˆ—è¡¨
- `GET /api/user-grammar-articles/{id}/` - è·å–å•ç¯‡ç”¨æˆ·è¯­æ³•æ–‡ç« 
- `POST /api/user-grammar-articles/` - åˆ›å»ºç”¨æˆ·è¯­æ³•æ–‡ç« 
- `PUT /api/user-grammar-articles/{id}/` - æ›´æ–°ç”¨æˆ·è¯­æ³•æ–‡ç« 
- `DELETE /api/user-grammar-articles/{id}/` - åˆ é™¤ç”¨æˆ·è¯­æ³•æ–‡ç« 
- `POST /api/user-grammar-articles/generate_content/` - AIç”Ÿæˆå†…å®¹

**æŸ¥è¯¢å‚æ•°**ï¼šåŒè¯­æ³•æ–‡ç« API

**æƒé™**ï¼š
- è‡ªåŠ¨æŒ‰å½“å‰ç”¨æˆ·åï¼ˆ`author`ï¼‰ç­›é€‰
- åªèƒ½æ“ä½œè‡ªå·±åˆ›å»ºçš„æ–‡ç« 

## ğŸ’» å‰ç«¯å®ç°

### Tabåˆ‡æ¢é€»è¾‘

```javascript
let currentTab = 'grammar'; // æˆ– 'mine'

async function loadArticles(page = 1) {
    // æ ¹æ®å½“å‰tabé€‰æ‹©ä¸åŒçš„APIç«¯ç‚¹
    let apiUrl = '';
    if (currentTab === 'grammar') {
        apiUrl = `${API_BASE_URL}/grammar-articles/`;
    } else if (currentTab === 'mine') {
        apiUrl = `${API_BASE_URL}/user-grammar-articles/`;
    }
    
    // è°ƒç”¨API...
}
```

### æ–‡ç« æ“ä½œ

**åˆ›å»º/æ›´æ–°/åˆ é™¤**ï¼š
- æ‰€æœ‰æ“ä½œéƒ½ä¼šæ ¹æ®å½“å‰tabè‡ªåŠ¨é€‰æ‹©æ­£ç¡®çš„APIç«¯ç‚¹
- `grammar` tab â†’ `/api/grammar-articles/`
- `mine` tab â†’ `/api/user-grammar-articles/`

**AIç”Ÿæˆ**ï¼š
- ä¸¤ä¸ªtabéƒ½ä½¿ç”¨å„è‡ªçš„ `generate_content` ç«¯ç‚¹
- é…ç½®å’Œä½¿ç”¨æ–¹å¼å®Œå…¨ç›¸åŒ

## ğŸ”„ æ•°æ®éš”ç¦»

### è¯­æ³•æ–‡ç« ï¼ˆGrammar Articlesï¼‰
âœ… æ‰€æœ‰ç”¨æˆ·å¯è§  
âœ… ç³»ç»Ÿç»Ÿä¸€ç®¡ç†  
âœ… é€šå¸¸ç”±ç®¡ç†å‘˜åˆ›å»º  
âœ… ä½œä¸ºæ•™å­¦èµ„æºå…±äº«  

### ç”¨æˆ·è¯­æ³•æ–‡ç« ï¼ˆUser Grammar Articlesï¼‰
âœ… åªæ˜¾ç¤ºå½“å‰ç”¨æˆ·åˆ›å»ºçš„æ–‡ç«   
âœ… ç”¨æˆ·ç‹¬ç«‹ç®¡ç†  
âœ… è‡ªåŠ¨ç»‘å®šåˆ°åˆ›å»ºè€…  
âœ… å®Œå…¨éš”ç¦»ï¼Œäº’ä¸å¹²æ‰°  

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯1ï¼šç³»ç»Ÿæ·»åŠ è¯­æ³•æ•™å­¦æ–‡ç« 

1. ä»¥ç®¡ç†å‘˜èº«ä»½ç™»å½•Django Admin
2. è¿›å…¥"è¯­æ³•æ–‡ç« "(Grammar Articles)ç®¡ç†
3. æ·»åŠ æ–°çš„è¯­æ³•æ–‡ç« 
4. æ‰€æœ‰ç”¨æˆ·åœ¨"è¯­æ³•"tabä¸‹å¯è§

### åœºæ™¯2ï¼šç”¨æˆ·åˆ›å»ºä¸ªäººè¯­æ³•ç¬”è®°

1. ç”¨æˆ·æ‰“å¼€"è¯­æ³•æ–‡ç« "é¡µé¢
2. åˆ‡æ¢åˆ°"æˆ‘çš„"tab
3. ç‚¹å‡»"æ–°å»ºæ–‡ç« "
4. å¡«å†™å†…å®¹å¹¶ä¿å­˜
5. æ–‡ç« åªåœ¨è¯¥ç”¨æˆ·çš„"æˆ‘çš„"tabä¸‹æ˜¾ç¤º

### åœºæ™¯3ï¼šAIç”Ÿæˆè¯­æ³•æ–‡ç« 

æ— è®ºåœ¨å“ªä¸ªtabï¼š
1. ç‚¹å‡»"æ–°å»ºæ–‡ç« "
2. è¾“å…¥AIæç¤ºè¯
3. ç‚¹å‡»"ç”Ÿæˆå†…å®¹"
4. ç³»ç»Ÿæ ¹æ®å½“å‰tabè°ƒç”¨å¯¹åº”çš„API
5. ç”Ÿæˆçš„å†…å®¹è‡ªåŠ¨å¡«å……

## ğŸ—„ï¸ æ•°æ®åº“è¿ç§»

### åˆ›å»ºè¿ç§»æ–‡ä»¶

```bash
python3 manage.py makemigrations articles
```

### åº”ç”¨è¿ç§»

```bash
python3 manage.py migrate
```

### è¿ç§»å†…å®¹

æœ¬æ¬¡è¿ç§»å°†åˆ›å»ºä¸¤å¼ æ–°è¡¨ï¼š
- `grammar_articles`
- `user_grammar_articles`

åŸæœ‰çš„ `articles` è¡¨ä¸å—å½±å“ã€‚

## ğŸ”§ ç®¡ç†åå°

### Django Adminé…ç½®

ä¸¤ä¸ªæ¨¡å‹éƒ½å·²æ³¨å†Œåˆ°Django Adminï¼š

**è¯­æ³•æ–‡ç« ç®¡ç†**ï¼š
- åˆ—è¡¨æ˜¾ç¤ºï¼šæ ‡é¢˜ã€éš¾åº¦ã€åˆ†ç±»ã€å­—æ•°ã€åˆ›å»ºæ—¶é—´ã€çŠ¶æ€ã€ä½œè€…
- ç­›é€‰ï¼šéš¾åº¦ã€åˆ†ç±»ã€çŠ¶æ€ã€åˆ›å»ºæ—¶é—´
- æœç´¢ï¼šæ ‡é¢˜ã€å†…å®¹ã€ä½œè€…
- åˆ†ç»„å­—æ®µï¼šåŸºæœ¬ä¿¡æ¯ã€åˆ†ç±»ä¿¡æ¯ã€ç»Ÿè®¡ä¿¡æ¯ã€çŠ¶æ€

**ç”¨æˆ·è¯­æ³•æ–‡ç« ç®¡ç†**ï¼š
- é¢å¤–ç­›é€‰ï¼šä½œè€…ï¼ˆå¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·çš„æ–‡ç« ï¼‰
- å…¶ä»–é…ç½®åŒè¯­æ³•æ–‡ç« 

è®¿é—®åœ°å€ï¼š`http://localhost:8000/admin/`

## ğŸ“Š æ•°æ®ç»Ÿè®¡

### æŸ¥çœ‹è¯­æ³•æ–‡ç« æ€»æ•°

```python
from articles.models import GrammarArticle
total = GrammarArticle.objects.filter(is_active=True).count()
```

### æŸ¥çœ‹æŸç”¨æˆ·çš„æ–‡ç« æ•°

```python
from articles.models import UserGrammarArticle
user_articles = UserGrammarArticle.objects.filter(
    author='username',
    is_active=True
).count()
```

### æŒ‰åˆ†ç±»ç»Ÿè®¡

```python
from django.db.models import Count

# è¯­æ³•æ–‡ç« æŒ‰åˆ†ç±»ç»Ÿè®¡
GrammarArticle.objects.values('category').annotate(
    count=Count('id')
).order_by('-count')

# ç”¨æˆ·æ–‡ç« æŒ‰ä½œè€…ç»Ÿè®¡
UserGrammarArticle.objects.values('author').annotate(
    count=Count('id')
).order_by('-count')
```

## ğŸš€ ä¼˜åŠ¿

### 1. æ•°æ®éš”ç¦»
- ç³»ç»Ÿæ–‡ç« å’Œç”¨æˆ·æ–‡ç« å®Œå…¨åˆ†ç¦»
- ä¸ä¼šç›¸äº’å¹²æ‰°
- ä¾¿äºæƒé™ç®¡ç†

### 2. æ€§èƒ½ä¼˜åŒ–
- ç”¨æˆ·æŸ¥è¯¢åªæ£€ç´¢è‡ªå·±çš„æ–‡ç« 
- æŸ¥è¯¢æ•ˆç‡æ›´é«˜
- ç´¢å¼•æ›´æœ‰æ•ˆ

### 3. çµæ´»ç®¡ç†
- ç³»ç»Ÿæ–‡ç« å¯ä»¥è®¾ç½®ä¸åŒçš„ç®¡ç†ç­–ç•¥
- ç”¨æˆ·æ–‡ç« å¯ä»¥æœ‰ç‹¬ç«‹çš„é…é¢æ§åˆ¶
- ä¾¿äºæœªæ¥åŠŸèƒ½æ‰©å±•

### 4. æ¸…æ™°çš„èŒè´£åˆ†ç¦»
- ç³»ç»Ÿæ–‡ç« ï¼šæ•™å­¦èµ„æº
- ç”¨æˆ·æ–‡ç« ï¼šä¸ªäººç¬”è®°/ç»ƒä¹ 

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. APIç«¯ç‚¹é€‰æ‹©
å‰ç«¯å¿…é¡»æ ¹æ®å½“å‰tabæ­£ç¡®é€‰æ‹©APIç«¯ç‚¹ï¼Œå¦åˆ™ä¼šå‡ºç°404é”™è¯¯ã€‚

### 2. ç”¨æˆ·æ ‡è¯†
- ç¡®ä¿ `localStorage` ä¸­æœ‰ `paperread_username`
- æœªç™»å½•ç”¨æˆ·é»˜è®¤ä¸º `guest`
- å»ºè®®åœ¨ç”¨æˆ·ç™»å½•åè®¾ç½®æ­£ç¡®çš„ç”¨æˆ·å

### 3. æ•°æ®è¿ç§»
å¦‚æœä¹‹å‰æœ‰è¯­æ³•ç›¸å…³çš„æ–‡ç« åœ¨ `articles` è¡¨ä¸­ï¼Œéœ€è¦æ‰‹åŠ¨è¿ç§»ï¼š

```python
from articles.models import Article, GrammarArticle

# è¿ç§»ç¤ºä¾‹
grammar_articles = Article.objects.filter(category__icontains='è¯­æ³•')
for article in grammar_articles:
    GrammarArticle.objects.create(
        title=article.title,
        content=article.content,
        source=article.source,
        difficulty=article.difficulty,
        category=article.category,
        author='admin'
    )
```

### 4. æµ‹è¯•å»ºè®®
- æµ‹è¯•ä¸¤ä¸ªtabçš„åˆ‡æ¢
- æµ‹è¯•ä¸åŒç”¨æˆ·çš„æ•°æ®éš”ç¦»
- æµ‹è¯•AIç”ŸæˆåŠŸèƒ½
- æµ‹è¯•æœç´¢å’Œç­›é€‰åŠŸèƒ½

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [AIç”ŸæˆåŠŸèƒ½é…ç½®è¯´æ˜](./AIç”ŸæˆåŠŸèƒ½é…ç½®è¯´æ˜.md)
- [AIç”ŸæˆåŠŸèƒ½æµ‹è¯•æŒ‡å—](./AIç”ŸæˆåŠŸèƒ½æµ‹è¯•æŒ‡å—.md)
- [DeepSeeké›†æˆè¯´æ˜](./DeepSeeké›†æˆè¯´æ˜.md)

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

- [ ] æ·»åŠ æ–‡ç« æ¨¡æ¿åŠŸèƒ½
- [ ] æ”¯æŒæ–‡ç« å¯¼å…¥/å¯¼å‡º
- [ ] æ·»åŠ æ–‡ç« æ ‡ç­¾ç³»ç»Ÿ
- [ ] æ”¯æŒæ–‡ç« ç‰ˆæœ¬æ§åˆ¶
- [ ] æ·»åŠ åä½œç¼–è¾‘åŠŸèƒ½

---

**æ›´æ–°æ—¥æœŸ**ï¼š2025-10-25  
**ç‰ˆæœ¬**ï¼šv1.0

