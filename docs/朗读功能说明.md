# 🔊 朗读功能说明

## 🎯 功能概述

新增了**朗读Tab**，允许用户朗读当前页面的所有句子。系统会自动获取当前页的所有句子，用户可以：
- 播放全部句子（按顺序逐句朗读）
- 单独朗读某个句子
- 暂停/继续朗读
- 停止朗读
- 调节朗读语速

---

## ✨ 核心特性

### 1. 自动句子收集
- ✅ **自动识别** - 切换到朗读Tab时自动获取当前页所有句子
- ✅ **完整展示** - 显示每个句子的完整文本
- ✅ **动态更新** - 实时反映当前页内容

### 2. 朗读控制
- ✅ **播放全部** - 按顺序朗读所有句子
- ✅ **单句朗读** - 点击句子的朗读按钮单独播放
- ✅ **暂停/继续** - 中途暂停，可随时继续
- ✅ **停止播放** - 终止朗读并重置状态

### 3. 语速控制
- ✅ **滑块调节** - 0.5x - 2.0x 可调
- ✅ **实时显示** - 当前语速值实时显示
- ✅ **立即生效** - 调节后立即应用到朗读

### 4. 视觉反馈
- ✅ **当前句子高亮** - 正在朗读的句子高亮显示
- ✅ **已播放标记** - 已朗读的句子半透明显示
- ✅ **进度显示** - 显示当前朗读进度（X/总数）
- ✅ **自动滚动** - 朗读时自动滚动到对应句子
- ✅ **闪烁动画** - 文章中对应句子闪烁高亮

---

## 📖 使用说明

### 步骤1：打开朗读Tab

1. **切换到朗读Tab**
   ```
   在右侧侧边栏顶部，点击"🔊 朗读"标签
   ```

2. **查看句子列表**
   ```
   - 自动显示当前页所有句子
   - 每个句子都有独立的朗读按钮
   ```

---

### 步骤2：调节语速（可选）

1. **拖动滑块**
   ```
   在"语速"滑块上拖动
   - 0.5x = 慢速（适合初学者）
   - 1.0x = 正常速度
   - 1.5x = 快速
   - 2.0x = 超快速
   ```

2. **查看当前值**
   ```
   滑块右侧显示当前语速值
   ```

---

### 步骤3：开始朗读

**方式1：播放全部**
```
1. 点击"播放全部"按钮
2. 系统自动按顺序朗读所有句子
3. 每个句子朗读时会：
   - 在列表中高亮显示
   - 在文章中闪烁高亮
   - 自动滚动到对应位置
4. 全部完成后自动停止
```

**方式2：单句朗读**
```
1. 找到想要朗读的句子
2. 点击该句子的"🔊 朗读"按钮
3. 系统朗读该句子
4. 朗读完成后自动停止
```

---

### 步骤4：控制播放

**暂停播放**：
```
播放过程中点击"⏸️ 暂停"按钮
- 朗读暂停
- 按钮变为"▶️ 继续"
- 进度显示"⏸️ 已暂停"
```

**继续播放**：
```
暂停状态下点击"▶️ 继续"按钮
- 从当前位置继续朗读
- 按钮恢复为"⏸️ 暂停"
```

**停止播放**：
```
点击"⏹️ 停止"按钮
- 终止朗读
- 重置进度
- 恢复初始状态
```

---

## 🎨 视觉效果

### 句子列表状态

**等待朗读**：
```
┌─────────────────────────────┐
│ The quick brown fox...      │
│ 🔊 朗读                      │
└─────────────────────────────┘
```

**正在朗读**（蓝色左边框，渐变背景）：
```
┌─────────────────────────────┐
│▌The quick brown fox...      │
│▌🔊 朗读                      │
└─────────────────────────────┘
```

**已朗读**（半透明）：
```
┌─────────────────────────────┐
│ The quick brown fox...      │ 60%
│ 🔊 朗读                      │
└─────────────────────────────┘
```

### 进度显示

**等待播放**：
```
等待播放...
```

**正在朗读**：
```
正在朗读 3 / 15
```

**已暂停**：
```
⏸️ 已暂停
```

**朗读完成**：
```
✅ 朗读完成！
```

---

## 💡 使用场景

### 场景1：听力练习
```
阅读文章时想练习听力
→ 切换到朗读Tab
→ 点击"播放全部"
→ 听取标准发音，跟读练习 🎧
```

### 场景2：生词发音学习
```
遇到不确定发音的单词
→ 找到包含该单词的句子
→ 点击"🔊 朗读"按钮
→ 听取发音，学习正确读法 📚
```

### 场景3：重点句子背诵
```
需要背诵某个句子
→ 找到该句子
→ 反复点击"朗读"按钮
→ 听读结合，加深记忆 💭
```

### 场景4：慢速理解
```
文章较难，需要慢速听
→ 调节语速到 0.5x
→ 播放全部
→ 慢速跟读，理解每个单词 🐌
```

### 场景5：快速复习
```
文章已读过，快速复习
→ 调节语速到 1.5x - 2.0x
→ 播放全部
→ 快速回顾内容 🚀
```

---

## 🔧 技术实现

### Web Speech API
```javascript
// 使用浏览器内置的语音合成API
const utterance = new SpeechSynthesisUtterance(text);
utterance.rate = 1.0;  // 语速
utterance.lang = 'en-US';  // 英语
speechSynthesis.speak(utterance);
```

### 朗读流程
```
1. 获取所有句子元素
2. 提取句子文本
3. 创建句子数组
4. 显示在列表中
5. 用户点击播放
6. 逐句创建语音对象
7. 播放并更新UI
8. 自动滚动和高亮
9. 完成后继续下一句
10. 全部完成后重置
```

### 句子状态管理
```javascript
// 全局变量
let readingSentences = [];  // 所有句子
let currentReadingIndex = -1;  // 当前索引
let isReading = false;  // 是否朗读中
let readingPaused = false;  // 是否暂停

// 状态更新
- index < currentIndex → 已播放
- index === currentIndex → 正在播放
- index > currentIndex → 等待播放
```

### 自动滚动和高亮
```javascript
// 滚动到句子位置
element.scrollIntoView({ 
    behavior: 'smooth', 
    block: 'center' 
});

// 添加闪烁动画
element.style.animation = 'highlight-flash 2s ease infinite';

// 朗读完成后移除
element.style.animation = '';
```

---

## ⚙️ 语速说明

| 语速值 | 说明 | 适用场景 |
|--------|------|----------|
| 0.5x | 极慢 | 初学者、生词多 |
| 0.7x | 慢速 | 精听练习 |
| 1.0x | 正常 | 日常阅读 |
| 1.3x | 略快 | 熟悉内容 |
| 1.5x | 快速 | 快速复习 |
| 2.0x | 超快 | 极速浏览 |

---

## ❓ 常见问题

### Q1: 为什么有些浏览器没有声音？

**原因**：
- 浏览器可能不支持Web Speech API
- 浏览器设置禁止了声音
- 系统语音服务未启用

**解决方法**：
- 使用Chrome、Edge、Safari等现代浏览器
- 检查浏览器声音权限
- 确保系统音量已开启

### Q2: 发音是否标准？

**是的。** 使用的是浏览器内置的语音引擎，通常采用高质量的TTS（文本转语音）技术，发音标准清晰。

### Q3: 可以选择不同的语音吗？

**目前不支持。** 使用的是系统默认的英语语音。未来版本可能会添加语音选择功能。

### Q4: 朗读会保存进度吗？

**不会。** 朗读是实时功能，不保存进度。每次打开朗读Tab都会重新获取当前页句子。

### Q5: 切换页面后还能继续朗读吗？

**不能。** 朗读功能仅针对当前页。切换页面后需要重新开始。建议在朗读完当前页后再翻页。

### Q6: 可以调整音量吗？

**不能通过界面调整。** 请使用系统音量控制或浏览器音量控制。

### Q7: 朗读时可以标注句子吗？

**可以。** 朗读功能独立运行，不影响其他功能。可以在朗读的同时：
- 切换到单词Tab查看单词
- 切换到句子Tab查看已标注句子
- 使用标注模式标注单词或句子

---

## 💡 使用技巧

### 技巧1：听写练习
```
1. 调节语速到 0.7x
2. 播放全部
3. 每听一句暂停
4. 写下听到的内容
5. 对照原文检查
```

### 技巧2：影子跟读
```
1. 播放全部（正常语速）
2. 朗读时同步跟读
3. 模仿发音和语调
4. 提高口语流利度
```

### 技巧3：重点句子反复听
```
1. 找到重点句子
2. 反复点击朗读按钮
3. 直到完全理解
4. 配合句子标注功能标记
```

### 技巧4：快速预览
```
第一遍阅读前：
1. 调节语速到 1.5x
2. 播放全部
3. 快速了解文章内容
4. 再进行精读
```

### 技巧5：分段学习
```
1. 每次只学习一页内容
2. 朗读 → 理解 → 标注 → 翻页
3. 系统自动保存阅读进度
4. 下次打开自动跳转
```

---

## 🎯 与其他功能的配合

### 配合单词标注
```
1. 朗读时遇到生词
2. 切换到单词标注模式
3. 标注生词
4. 返回朗读Tab继续
```

### 配合句子标注
```
1. 朗读时发现精彩句子
2. 切换到句子标注模式
3. 标注该句子
4. 返回朗读Tab继续
```

### 配合翻译功能
```
1. 朗读完不理解
2. 启用翻译模式
3. 查看中文翻译
4. 理解后继续朗读
```

---

## 🔄 更新日志

### 2024-10-23 v1.0
- ✨ 新增朗读Tab
- ✨ 自动获取当前页所有句子
- ✨ 支持播放全部/单句朗读
- ✨ 支持暂停/继续/停止
- ✨ 支持语速调节（0.5x - 2.0x）
- ✨ 自动滚动到朗读句子
- ✨ 高亮闪烁视觉反馈
- ✨ 实时进度显示

---

## 🎉 功能优势

### 学习效率
- ✅ **听读结合** - 视觉+听觉双重输入
- ✅ **标准发音** - 学习正确英语发音
- ✅ **节省时间** - 自动朗读，解放双眼

### 用户体验
- ✅ **操作简单** - 一键播放全部
- ✅ **控制灵活** - 暂停、继续、停止随心
- ✅ **视觉清晰** - 高亮显示当前句子

### 学习场景
- ✅ **听力练习** - 标准英语听力训练
- ✅ **口语跟读** - 影子跟读提高口语
- ✅ **发音学习** - 学习单词和句子发音
- ✅ **快速复习** - 加速朗读快速回顾

---

**开始使用朗读功能，让英语学习更高效！** 🔊📚✨

