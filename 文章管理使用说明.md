# 文章管理系统使用说明

## 🎯 功能概览

这是一个完整的英文文章阅读和管理系统，包含两个主要页面：

### 1. 📚 文章管理页面 (`articles_manager.html`)
- 查看所有文章列表
- 新建文章
- 编辑文章
- 删除文章
- 上传文章文件（.txt/.md）
- 搜索和筛选文章

### 2. 📖 阅读模式页面 (`index.html`)
- 阅读文章
- 查看单词列表
- 标注单词（彩色标注，自动保存）
- 翻译单词
- 显示段落翻译

## 🚀 快速开始

### 步骤1：启动后端服务

```bash
cd /Users/guolei/work/local/stpython/paperread

# 首次使用需要创建数据库
python manage.py makemigrations
python manage.py migrate

# 创建管理员账号（可选，用于访问管理后台）
python manage.py createsuperuser

# 启动服务器
python manage.py runserver
```

后端将运行在：`http://localhost:8000`

### 步骤2：访问前端页面

直接用浏览器打开：
- **文章管理页**: `articles_manager.html`
- **阅读模式页**: `index.html`

## 📝 详细功能说明

### 一、文章管理页面

#### 1. 新建文章

1. 点击 **"✏️ 新建文章"** 按钮
2. 填写文章信息：
   - **标题**：必填
   - **难度**：初级/中级/高级
   - **分类**：如 Technology, Business（可选）
   - **来源**：文章出处（可选）
   - **内容**：必填，粘贴英文文章
3. 点击 **"保存"**

**提示**：输入文章内容时，系统会自动统计单词数和字符数。

#### 2. 上传文章文件

1. 点击 **"📤 上传文件"** 按钮
2. 两种上传方式：
   - **点击上传区域**，选择文件
   - **拖拽文件**到上传区域
3. 支持格式：`.txt` 和 `.md` 文件
4. 预览文件内容后：
   - 修改标题（默认使用文件名）
   - 选择难度级别
5. 点击 **"确认上传"**

#### 3. 编辑文章

1. 在文章卡片中点击 **"✏️ 编辑"** 按钮
2. 修改文章信息
3. 点击 **"保存"**

#### 4. 删除文章

1. 在文章卡片中点击 **"🗑️ 删除"** 按钮
2. 确认删除操作

⚠️ **注意**：删除操作不可恢复！

#### 5. 搜索和筛选

**搜索**：
- 在搜索框输入关键词
- 会搜索文章标题和内容
- 按回车或点击🔍按钮搜索

**筛选**：
- **难度筛选**：选择初级/中级/高级
- **分类筛选**：选择已有的分类
- 可组合使用

**清除**：
- 点击 **"清除筛选"** 恢复显示所有文章

#### 6. 阅读文章

点击文章卡片中的 **"👁️ 阅读"** 按钮，会跳转到阅读模式页面。

### 二、阅读模式页面

#### 1. 加载文章

有两种方式：

**方式A：从管理页跳转**
- 在文章管理页点击"阅读"按钮
- 自动加载文章内容
- 自动加载之前保存的标注

**方式B：手动输入**
- 直接在文本框粘贴文章
- 或点击"加载示例文章"

#### 2. 单词列表

文章加载后，左侧会显示：
- 所有单词及其出现频率
- 总词数统计
- 不同单词数统计

**排序方式**：
- 全部：按原始顺序
- A-Z排序：字母顺序
- 按频率：从高到低

**搜索单词**：
- 在搜索框输入单词片段
- 实时过滤显示

#### 3. 标注模式 📝

**开启标注模式**：
1. 勾选 **"📝 标注模式"**
2. 选择标注颜色（6种颜色可选）
3. 点击文章中的单词进行标注

**标注功能**：
- 同一个单词的所有实例都会被标注
- 再次点击取消标注
- 侧边栏单词列表会显示对应颜色
- **标注会自动保存到服务器**

**清除标注**：
- 点击 **"清除标注"** 按钮清除所有标注

#### 4. 翻译模式 🌐

**开启翻译模式**：
1. 勾选 **"🌐 翻译模式"**
2. 点击单词查看中文翻译

**翻译功能**：
- 翻译会显示在单词后面（橙色）
- 格式：`word (中文翻译)`
- 再次点击取消翻译

**清除翻译**：
- 点击 **"清除翻译"** 按钮清除所有翻译

#### 5. 段落翻译

点击 **"🌏 显示中文翻译"** 按钮：
- 在每段英文下方显示中文翻译
- 再次点击隐藏翻译

#### 6. 普通高亮模式

**不开启任何模式时**：
- 点击单词会高亮该单词的所有实例
- 方便快速定位单词位置

## 💡 使用技巧

### 1. 文章组织建议

- **使用分类**：如 Technology, Business, Science, Culture
- **设置难度**：帮助选择适合自己水平的文章
- **填写来源**：记录文章出处，便于引用

### 2. 标注策略

建议的颜色使用：
- 🟡 **黄色**：生词
- 🟢 **绿色**：重点词汇
- 🟠 **橙色**：短语
- 🔵 **蓝色**：专业术语
- 🟣 **紫色**：需要复习的词
- 🔴 **红色**：难点词汇

### 3. 高效阅读流程

1. **首次阅读**：
   - 快速浏览，理解大意
   - 开启标注模式，标记生词（黄色）
   
2. **精读**：
   - 使用翻译模式查看生词释义
   - 标记重点词汇（绿色）
   
3. **复习**：
   - 查看单词列表
   - 按频率排序，优先记忆高频词

### 4. 批量导入文章

如果有多个文本文件：
1. 逐个上传（使用上传功能）
2. 或通过Django管理后台批量导入

## 🔧 高级功能

### 访问Django管理后台

1. 访问：`http://localhost:8000/admin/`
2. 使用创建的管理员账号登录
3. 可以：
   - 批量管理文章
   - 查看阅读历史
   - 管理用户标注
   - 导入/导出数据

### API使用

系统提供RESTful API，可用于：
- 第三方应用集成
- 自动化脚本
- 移动应用开发

API文档：访问 `http://localhost:8000/api/`

### 数据持久化

所有数据都保存在数据库中：
- 文章内容
- 用户标注（按IP区分）
- 阅读历史

**数据库位置**：`db.sqlite3`

## ❓ 常见问题

### 1. 标注没有保存？

**原因**：后端服务未启动

**解决**：确保运行了 `python manage.py runserver`

### 2. 上传文件失败？

**可能原因**：
- 文件格式不支持（仅支持 .txt 和 .md）
- 文件内容为空
- 网络连接问题

### 3. 翻译失败？

**原因**：翻译API限额已用完或网络问题

**解决**：
- 使用浏览器自带翻译功能
- 或使用其他翻译工具

### 4. 无法加载文章列表？

**检查**：
1. 后端是否启动：访问 `http://localhost:8000/api/articles/`
2. 是否有CORS错误：查看浏览器控制台
3. 数据库是否已迁移

## 🎨 自定义配置

### 修改API地址

如果后端运行在其他端口，修改以下文件中的 `API_BASE_URL`：
- `articles_manager.js`
- `script.js`

### 修改分页数量

在 `articles_manager.js` 中找到：
```javascript
page_size: 10
```
修改为想要的每页文章数。

### 添加更多颜色

在 `index.html` 的颜色选择器部分添加更多颜色按钮。

## 📊 数据备份

定期备份数据库文件：
```bash
cp db.sqlite3 db.sqlite3.backup
```

或使用Django的dumpdata命令：
```bash
python manage.py dumpdata > backup.json
```

恢复数据：
```bash
python manage.py loaddata backup.json
```

## 🎉 开始使用

现在你已经了解了所有功能，开始你的英文阅读之旅吧！

建议流程：
1. 上传或新建几篇文章
2. 从简单的文章开始阅读
3. 使用标注功能标记生词
4. 定期复习标注的单词
5. 逐步提升文章难度

祝你学习愉快！📚✨

